# 1934. Confirmation Rate

```mysql
SELECT
    s.user_id,
    ROUND(AVG(IF(c.action = 'confirmed',1,0)),2) AS 'confirmation_rate'
FROM 
    Signups s
LEFT JOIN Confirmations c ON
    s.user_id = c.user_id
GROUP BY s.user_id
```

```mysql
-- 不知道AVG跟IF函式的時候用的寫法,留著做個紀念
SELECT
    s.user_id,
    ROUND(COUNT(ac.action) / s.c,2) AS 'confirmation_rate'
FROM (
    SELECT
        s.user_id,
        COUNT(s.user_id) AS c
    FROM
        Signups s
    LEFT JOIN Confirmations c ON
        s.user_id = c.user_id
    GROUP BY s.user_id) s
LEFT JOIN (
        SELECT
            s.user_id,
            action
        FROM
            Signups s
        LEFT JOIN Confirmations c ON
            s.user_id = c.user_id
    ) ac ON
        s.user_id = ac.user_id AND
        ac.action IS NOT NULL AND ac.action = 'confirmed'
GROUP BY s.user_id,ac.action;
```